# 垃圾邮件识别

## 1. 数据集以及处理

https://pan.baidu.com/s/1i4HaYTB#list/path=%2F

对文件进行merge(Merge.py), 而且由于会出现很多重复行，用uniq 进行去重。

```python
   16207 ham_new.txt
    4702 spam_new.txt
   20909 total
```

这边没有进一步对进行正负样本进行调整，一方面虽然去重复，spam还有有很多相似的query，过采样明显不合适。欠采样会丢失数据。这里用了代价敏感方法。不过最后效果不明显。

# 2. 建模

TF-IDF

#3. 分类器

LR

SVM

RandomForest

# 4. 结果

```python
/Users/aprilkuo/anaconda2/bin/python2.7 /Users/aprilkuo/PycharmProjects/Bays/main.py
[ 4702 16207]
Using LogisticRegression :
roc_auc_score: 0.997738266248
accuracy_score: 0.980073330145
classification_report:
             precision    recall  f1-score   support

          0       0.93      0.98      0.96      1400
          1       0.99      0.98      0.99      4873

avg / total       0.98      0.98      0.98      6273







Using RandomForestClassifier :
roc_auc_score: 0.997738266248
accuracy_score: 0.980073330145
classification_report:
             precision    recall  f1-score   support

          0       0.93      0.98      0.96      1400
          1       0.99      0.98      0.99      4873

avg / total       0.98      0.98      0.98      6273







Using LinearSVC :
roc_auc_score: 0.997738266248
accuracy_score: 0.980073330145
classification_report:
             precision    recall  f1-score   support

          0       0.93      0.98      0.96      1400
          1       0.99      0.98      0.99      4873

avg / total       0.98      0.98      0.98      6273








Process finished with exit code 0

```

# 5.分析

效果特别好，一直觉得数据有问题，一方面spam的重复数据太多了，本来正负样例比例就很不平衡。选取了LR训练后Top100的特征进行观察,觉得可能有一些特征词确实能够很好地识别是不是垃圾邮件，Model 可能很容易Train出一些规则。



改进: 对于这种问题，不知道是不是作为异常检测问题来做会好一些。

```
/ 4.56563739801
. 3.42581837997
您 3.37860597902
我 3.13510977613
的 2.52644724693
com 2.4890806318
了 2.42245072906
网站 2.42079658741
公司 2.37959828781
， 2.35013168676
、 2.33725714727
- 2.24060117305
http 2.10831999198
！ 2.04309102156
发票 2.01573759566
他 1.92324516515
她 1.7862737845
： 1.76169865113
元 1.75819149509
www 1.70456443368
是 1.70107377588
= 1.67155652978
企业 1.63443918481
邮件 1.45855262524
	1.41441074536
~ 1.37869657688
。 1.36525848223
! 1.32089044518
题 1.31093936798
标 1.28243834444
说 1.26688126022
qq 1.26497072055
工作 1.21420411371
？ 1.21140571294
可 1.18368811799
客户 1.14979956619
本 1.09555508145
@ 1.08912465704
清华 1.07430464086
服务 1.07225668383
免费 1.05390994851
产品 1.03299286462
不 1.02591983751
很 0.994954459194
> 0.98264769494
您好 0.98144144042
都 0.980954525382
有限公司 0.979957855572
re 0.960061128958
也 0.958267640365
* 0.957953796541
代开 0.951649798314
信息 0.950943233129
代理 0.94660317161
广告 0.944769109817
mm 0.922986612564
联系人 0.9156497703
没有 0.901101963666
大家 0.890271919762
合作 0.877876662012
进入 0.865604500195
咨询 0.863742954107
优惠 0.863617992719
和 0.862565415904
贵 0.855559417245
就 0.847626989391
00 0.840166589568
人 0.826076507784
  0.812749967315
什么 0.799366771482
一个 0.783821722215
同学 0.78249127588
网络 0.782305495521
啊 0.778316328766
自己 0.776057718263
电话 0.771680586932
好 0.769326676471
等 0.757366739396
要求 0.749527092453
投资 0.744609427703
注册 0.740377771923
按 0.737919851713
在 0.729422780651
上网 0.715871287365
net 0.71394632214
要 0.713741731244
地址 0.711624777645
时候 0.709932071093
这个 0.707329616947
cn 0.704939389378
知道 0.703373779176
提供 0.702488873154
觉得 0.686881350445
熟悉 0.685179374836
能力 0.684724975687
对 0.683720359379
研究生 0.683317686802
经验 0.675751170998
软件 0.673137174161
```

